<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session 9f2cfbae-2d31-48a2-9667-9dfc4555a411 (2026-01-22 15:27Z) -->

# Ticket dropdown unassign issue (2026-01-22 15:27Z)

_**User (2026-01-22 10:35Z)**_

the unassign in ticket dropdown edit does not work when i select unassiged

---

_**Agent (model default, mode Agent)**_



---


Investigating the unassign issue. Examining relevant files.


---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: src/pages/TicketListDashboard.tsx</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="search" data-tool-name="codebase_search">
<details>
                <summary>Tool use: **codebase_search** • Searched codebase "unassign unassigned ticket dropdown edit" • **8** results</summary>
            
| File | Lines |
|------|-------|
| `src/pages/TicketDetails.tsx` | L34-538 |
| `src/pages/TicketListDashboard.tsx` | L15-528 |
| `src/pages/TicketListDashboard.tsx` | L7-528 |
| `server/src/services/ticketService.ts` | L429-500 |
| `server/src/services/ticketService.ts` | L154-321 |
| `src/pages/TicketDetails.tsx` | L29-538 |
| `server/src/routes/tickets.ts` | L113-158 |
| `server/src/routes/tickets.ts` | L88 |

</details>
</tool-use>

---

<tool-use data-tool-type="search" data-tool-name="grep">
<details>
<summary>Tool use: **grep** • Grep for "unassign|unassigned" • 60 matches</summary>

Output mode: content


| File | Content | Line |
|------|------|------|
| `.\src\pages\TicketListDashboard.tsx` | `if (error === 'No unassigned open/in-progress tickets to assign.') \{` | L48 |
| `.\src\pages\TicketListDashboard.tsx` | `const unassigned = normalizedTickets.filter(` | L223 |
| `.\src\pages\TicketListDashboard.tsx` | `if (unassigned.length === 0) \{` | L226 |
| `.\src\pages\TicketListDashboard.tsx` | `setError('No unassigned open/in-progress tickets to assign.')` | L227 |
| `.\src\pages\TicketListDashboard.tsx` | `await Promise.all(unassigned.map((t) => api.smartAssign(t.id)))` | L231 |
| `.\src\pages\TicketListDashboard.tsx` | `<span className="text-xs font-medium">Unassigned</span>` | L438 |
| `.\src\pages\TicketListDashboard.tsx` | `<p className="text-[11px] text-slate-400 mt-1">\{ticket.assigned_to_name \|\| 'Unassigned'\}</p>` | L516 |
| `.\src\pages\TicketDetails.tsx` | `<option value="">Unassigned</option>` | L278 |
| `.\src\pages\TicketDetails.tsx` | `\{ticket?.assigned_to_name \|\| 'Unassigned'\}` | L315 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `var UNASSIGNED = -1` | L10 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `var UNASSIGNED_NODE = new Array(0x100)` | L14 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `for (var i = 0; i < 0x100; i++) \{ UNASSIGNED_NODE[i] = UNASSIGNED \}` | L17 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `//         == UNASSIGNED -> unknown/unassigned sequence.` | L33 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `this.decodeTables[0] = UNASSIGNED_NODE.slice(0) // Create root node.` | L38 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `this.decodeTables.push(UNASSIGNED_NODE.slice(0))` | L52 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `this.decodeTables.push(UNASSIGNED_NODE.slice(0))` | L55 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `if (secondByteNode[j] === UNASSIGNED) \{` | L62 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `if (thirdByteNode[k] === UNASSIGNED) \{` | L70 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `if (fourthByteNode[l] === UNASSIGNED) \{ fourthByteNode[l] = GB18030_CODE \}` | L80 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `//         == UNASSIGNED -> no conversion found. Output a default char.` | L94 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `if (this.defCharSB === UNASSIGNED) this.defCharSB = this.encodeTable[0]["?"]` | L126 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `if (this.defCharSB === UNASSIGNED) this.defCharSB = "?".charCodeAt(0)` | L127 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `if (val == UNASSIGNED) \{ // Create new node.` | L143 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `this.decodeTables.push(node = UNASSIGNED_NODE.slice(0))` | L145 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `this.encodeTable[high] = UNASSIGNED_NODE.slice(0)` | L191 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `else if (bucket[low] == UNASSIGNED) \{ bucket[low] = dbcsCode \}` | L200 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `if (bucket[low] !== UNASSIGNED) node[DEF_CHAR] = bucket[low] // If a char was set before - make it a single-char subsequence.` | L216 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `uCode = UNASSIGNED` | L301 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `uCode = UNASSIGNED` | L309 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `nextChar = uCode; uCode = UNASSIGNED // Write an error, then current char.` | L314 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `var dbcsCode = UNASSIGNED` | L319 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `if (seqObj !== undefined && uCode != UNASSIGNED) \{ // We are in the middle of the sequence` | L320 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `if (dbcsCode == UNASSIGNED && this.gb18030) \{` | L350 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `if (dbcsCode === UNASSIGNED) \{ dbcsCode = this.defaultCharSingleByte \}` | L365 |
| `.\node_modules\iconv-lite\encodings\dbcs-codec.js` | `\} else if (uCode === UNASSIGNED) \{ // Unknown char.` | L450 |
| `.\node_modules\typescript\lib\typescript.js` | `General_Category: /* @__PURE__ */ new Set(["C", "Other", "Cc", "Control", "cntrl", "Cf", "Format", "Cn", "Unassigned", "Co", "Private_Use", "Cs", "Surrogate", "L", "Letter", "LC", "Cased_Letter", "Ll", "Lowercase_Letter", "Lm", "Modifier_Letter", "Lo", "Other_Letter", "Lt", "Titlecase_Letter", "Lu", "Uppercase_Letter", "M", "Mark", "Combining_Mark", "Mc", "Spacing_Mark", "Me", "Enclosing_Mark", "Mn", "Nonspacing_Mark", "N", "Number", "Nd", "Decimal_Number", "digit", "Nl", "Letter_Number", "No", "Other_Number", "P", "Punctuation", "punct", "Pc", "Connector_Punctuation", "Pd", "Dash_Punctuation", "Pe", "Close_Punctuation", "Pf", "Final_Punctuation", "Pi", "Initial_Punctuation", "Po", "Other_Punctuation", "Ps", "Open_Punctuation", "S", "Symbol", "Sc", "Currency_Symbol", "Sk", "Modifier_Symbol", "Sm", "Math_Symbol", "So", "Other_Symbol", "Z", "Separator", "Zl", "Line_Separator", "Zp", "Paragraph_Separator", "Zs", "Space_Separator"]),` | L14653 |
| `.\node_modules\typescript\lib\typescript.js` | `\} else if (exactOptionalPropertyTypes && getExactOptionalUnassignableProperties(source2, target2).length) \{` | L69610 |
| `.\node_modules\typescript\lib\typescript.js` | `\} else if (message === Diagnostics.Argument_of_type_0_is_not_assignable_to_parameter_of_type_1 && exactOptionalPropertyTypes && getExactOptionalUnassignableProperties(source2, target2).length) \{` | L69622 |
| `.\node_modules\typescript\lib\typescript.js` | `function getExactOptionalUnassignableProperties(source, target) \{` | L71752 |
| `.\node_modules\typescript\lib\_tsc.js` | `General_Category: /* @__PURE__ */ new Set(["C", "Other", "Cc", "Control", "cntrl", "Cf", "Format", "Cn", "Unassigned", "Co", "Private_Use", "Cs", "Surrogate", "L", "Letter", "LC", "Cased_Letter", "Ll", "Lowercase_Letter", "Lm", "Modifier_Letter", "Lo", "Other_Letter", "Lt", "Titlecase_Letter", "Lu", "Uppercase_Letter", "M", "Mark", "Combining_Mark", "Mc", "Spacing_Mark", "Me", "Enclosing_Mark", "Mn", "Nonspacing_Mark", "N", "Number", "Nd", "Decimal_Number", "digit", "Nl", "Letter_Number", "No", "Other_Number", "P", "Punctuation", "punct", "Pc", "Connector_Punctuation", "Pd", "Dash_Punctuation", "Pe", "Close_Punctuation", "Pf", "Final_Punctuation", "Pi", "Initial_Punctuation", "Po", "Other_Punctuation", "Ps", "Open_Punctuation", "S", "Symbol", "Sc", "Currency_Symbol", "Sk", "Modifier_Symbol", "Sm", "Math_Symbol", "So", "Other_Symbol", "Z", "Separator", "Zl", "Line_Separator", "Zp", "Paragraph_Separator", "Zs", "Space_Separator"]),` | L11241 |
| `.\node_modules\typescript\lib\_tsc.js` | `\} else if (exactOptionalPropertyTypes && getExactOptionalUnassignableProperties(source2, target2).length) \{` | L64999 |
| `.\node_modules\typescript\lib\_tsc.js` | `\} else if (message === Diagnostics.Argument_of_type_0_is_not_assignable_to_parameter_of_type_1 && exactOptionalPropertyTypes && getExactOptionalUnassignableProperties(source2, target2).length) \{` | L65011 |
| `.\node_modules\typescript\lib\_tsc.js` | `function getExactOptionalUnassignableProperties(source, target) \{` | L67141 |
| `.\node_modules\rollup\dist\shared\rollup.js` | `const UNASSIGNED$1 = Symbol('Unassigned');` | L13534 |
| `.\node_modules\rollup\dist\shared\rollup.js` | `this.renderedLiteralValue = UNASSIGNED$1;` | L13538 |
| `.\node_modules\rollup\dist\shared\rollup.js` | `if (this.renderedLiteralValue !== UNASSIGNED$1)` | L13571 |
| `.\node_modules\rollup\dist\shared\rollup.js` | `const UNASSIGNED = Symbol('Unassigned');` | L16900 |
| `.\node_modules\rollup\dist\shared\rollup.js` | `this.renderedLiteralValue = UNASSIGNED;` | L16904 |
| `.\node_modules\rollup\dist\shared\rollup.js` | `if (this.renderedLiteralValue !== UNASSIGNED)` | L16952 |
| `.\node_modules\rollup\dist\es\shared\node-entry.js` | `const UNASSIGNED$1 = Symbol('Unassigned');` | L11924 |
| `.\node_modules\rollup\dist\es\shared\node-entry.js` | `this.renderedLiteralValue = UNASSIGNED$1;` | L11928 |
| `.\node_modules\rollup\dist\es\shared\node-entry.js` | `if (this.renderedLiteralValue !== UNASSIGNED$1)` | L11961 |
| `.\node_modules\rollup\dist\es\shared\node-entry.js` | `const UNASSIGNED = Symbol('Unassigned');` | L15290 |
| `.\node_modules\rollup\dist\es\shared\node-entry.js` | `this.renderedLiteralValue = UNASSIGNED;` | L15294 |
| `.\node_modules\rollup\dist\es\shared\node-entry.js` | `if (this.renderedLiteralValue !== UNASSIGNED)` | L15342 |
| `.\node_modules\acorn\dist\acorn.mjs` | `var unicodeGeneralCategoryValues = "Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu";` | L3925 |
| `.\node_modules\@eslint-community\regexpp\index.mjs` | `const gcValueSets = new DataSet("C Cased_Letter Cc Cf Close_Punctuation Cn Co Combining_Mark Connector_Punctuation Control Cs Currency_Symbol Dash_Punctuation Decimal_Number Enclosing_Mark Final_Punctuation Format Initial_Punctuation L LC Letter Letter_Number Line_Separator Ll Lm Lo Lowercase_Letter Lt Lu M Mark Math_Symbol Mc Me Mn Modifier_Letter Modifier_Symbol N Nd Nl No Nonspacing_Mark Number Open_Punctuation Other Other_Letter Other_Number Other_Punctuation Other_Symbol P Paragraph_Separator Pc Pd Pe Pf Pi Po Private_Use Ps Punctuation S Sc Separator Sk Sm So Space_Separator Spacing_Mark Surrogate Symbol Titlecase_Letter Unassigned Uppercase_Letter Z Zl Zp Zs cntrl digit punct", "", "", "", "", "", "", "", "");` | L123 |
| `.\node_modules\acorn\dist\acorn.js` | `var unicodeGeneralCategoryValues = "Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu";` | L3931 |
| `.\node_modules\@eslint-community\regexpp\index.js` | `const gcValueSets = new DataSet("C Cased_Letter Cc Cf Close_Punctuation Cn Co Combining_Mark Connector_Punctuation Control Cs Currency_Symbol Dash_Punctuation Decimal_Number Enclosing_Mark Final_Punctuation Format Initial_Punctuation L LC Letter Letter_Number Line_Separator Ll Lm Lo Lowercase_Letter Lt Lu M Mark Math_Symbol Mc Me Mn Modifier_Letter Modifier_Symbol N Nd Nl No Nonspacing_Mark Number Open_Punctuation Other Other_Letter Other_Number Other_Punctuation Other_Symbol P Paragraph_Separator Pc Pd Pe Pf Pi Po Private_Use Ps Punctuation S Sc Separator Sk Sm So Space_Separator Spacing_Mark Surrogate Symbol Titlecase_Letter Unassigned Uppercase_Letter Z Zl Zp Zs cntrl digit punct", "", "", "", "", "", "", "", "");` | L127 |
| `.\node_modules\commander\index.js` | `// unassigned or boolean value` | L445 |


</details>
</tool-use>

---



---


Checking TicketDetails.tsx for the dropdown edit implementation:


---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: src/pages/TicketDetails.tsx</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="search" data-tool-name="codebase_search">
<details>
                <summary>Tool use: **codebase_search** • Searched codebase "updateTicket assignedTo null empty string unassign" • **13** results</summary>
            
| File | Lines |
|------|-------|
| `server/src/services/ticketService.ts` | L154-321 |
| `server/src/services/ticketService.ts` | L180-334 |
| `server/src/services/ticketService.ts` | L180-321 |
| `server/src/services/ticketService.ts` | L429-500 |
| `server/src/routes/tickets.ts` | L113-158 |
| `src/pages/TicketDetails.tsx` | L34-538 |
| `src/apiClient.ts` | L14-146 |
| `server/src/routes/tickets.ts` | L88 |
| `server/src/services/ticketService.ts` | L75-180 |
| `src/pages/TicketListDashboard.tsx` | L15-528 |
| `server/src/services/ticketService.ts` | L13-152 |
| `server/src/services/ticketService.ts` | L83-321 |
| `src/pages/TicketDetails.tsx` | L29-538 |

</details>
</tool-use>

---



---


Checking the API client to see how the update request is sent:


---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: src/apiClient.ts</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="search" data-tool-name="grep">
<details>
<summary>Tool use: **grep** • Grep for "updateTicket" • 8 matches</summary>

Output mode: content


| File | Content | Line |
|------|------|------|
| `.\src\pages\TicketListDashboard.tsx` | `await api.updateTicket(ticketId, \{ status: columnKey \})` | L166 |
| `.\src\apiClient.ts` | `updateTicket: (` | L78 |
| `.\server\src\routes\tickets.ts` | `updateTicket,` | L9 |
| `.\server\src\routes\tickets.ts` | `const updateTicketSchema = z.object(\{` | L31 |
| `.\server\src\routes\tickets.ts` | `const body = validate(updateTicketSchema, req.body)` | L129 |
| `.\server\src\routes\tickets.ts` | `const updated = await updateTicket(` | L132 |
| `.\server\src\services\ticketService.ts` | `export async function updateTicket(` | L183 |
| `.\src\pages\TicketDetails.tsx` | `const updated = await api.updateTicket(id, \{` | L139 |


</details>
</tool-use>

---



---


Checking the validation schema for the update ticket endpoint:


---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: server/src/routes/tickets.ts</summary>

</details>
</tool-use>

---



---


Issue: in `server/src/routes/tickets.ts` line 137, `body.assignedTo ?? undefined` converts `null` to `undefined`, so the service skips the update. Fixing by passing `null` through when unassigning:


---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: server/src/services/ticketService.ts</summary>

</details>
</tool-use>

---



---


Fixing the route handler: `body.assignedTo ?? undefined` converts `null` to `undefined`, so the service skips the update. Passing `null` through when unassigning:


---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: server/src/routes/tickets.ts</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -135,5 +135,5 @@
          status: body.status,
          priority: body.priority,
-         assignedTo: body.assignedTo ?? undefined,
+         assignedTo: body.assignedTo,
          title: body.title,
          description: body.description,
```

</details>

</tool-use>

---



---


Checking for linting errors:


---

<tool-use data-tool-type="generic" data-tool-name="read_lints">
<details>
          <summary>Tool use: **read_lints** • Read lints for 1 file</summary>
      
Lint paths:

- `server/src/routes/tickets.ts`

Lint results


**No lint errors found**
</details>
</tool-use>

---



---


Fix applied. The issue was in `server/src/routes/tickets.ts` line 137: `body.assignedTo ?? undefined` converted `null` to `undefined`, so the service skipped the update.

**What was happening:**
- Selecting "Unassigned" set `assignedDraft` to `null`
- The route converted `null` to `undefined` with `??`
- The service checks `if (fields.assignedTo !== undefined)`, so `undefined` was skipped
- The assignment didn't change

**The fix:**
- Removed the `?? undefined` conversion
- `null` is now passed through
- The service updates `assigned_to` to `null` in the database

Unassigning a ticket by selecting "Unassigned" should now work. The change preserves existing behavior: if `assignedTo` is not provided, it remains `undefined` and is not updated.

---

