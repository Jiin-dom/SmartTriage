<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session 46e9baff-a51a-4da3-8df3-676fa687c93a (2026-01-23 12:27Z) -->

# Ticket deadline option (2026-01-23 12:27Z)

_**User (2026-01-23 08:01Z)**_

add set deadline option or the tickets

---

_**Agent (model default, mode Agent)**_



---


Reviewing the ticket implementation to understand the current structure.


---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: server/src/routes/tickets.ts</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: server/src/services/ticketService.ts</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: src/pages/CreateNewTicket.tsx</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: src/pages/TicketDetails.tsx</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="search" data-tool-name="codebase_search">
<details>
                <summary>Tool use: **codebase_search** • Searched codebase "What is the database schema for tickets table?" • **15** results</summary>
            
| File | Lines |
|------|-------|
| `server/src/services/ticketService.ts` | L83-321 |
| `server/src/services/ticketService.ts` | L75-180 |
| `server/src/routes/tickets.ts` | L89 |
| `server/src/services/ticketService.ts` | L351-427 |
| `server/src/services/ticketService.ts` | L3-81 |
| `server/src/services/ticketService.ts` | L453-594 |
| `server/src/services/ticketService.ts` | L154-321 |
| `src/pages/TicketDetails.tsx` | L38 |
| `server/src/services/ticketService.ts` | L180-321 |
| `server/src/services/ticketService.ts` | L73 |
| `server/src/routes/tickets.ts` | L39-102 |
| `server/src/services/ticketService.ts` | L463-643 |
| `server/src/services/ticketService.ts` | L13-152 |
| `src/pages/TicketListDashboard.tsx` | L709 |
| `server/src/services/ticketService.ts` | L336-410 |

</details>
</tool-use>

---



---


Checking the database schema and migrations for a deadline field:


---

<tool-use data-tool-type="generic" data-tool-name="glob_file_search">
<details>
<summary>Tool use: **glob_file_search** • Searched codebase "*.sql" • **1** result in **1** directory</summary>

Directory: **d:\SmartTriage** (1 file)

| File |
|------|
| `server\migrations\add_user_preferences.sql` |

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: src/apiClient.ts</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: src/pages/TicketListDashboard.tsx</summary>

</details>
</tool-use>

---



---


Checking the database structure to see if a deadline field exists:


---

<tool-use data-tool-type="search" data-tool-name="codebase_search">
<details>
                <summary>Tool use: **codebase_search** • Searched codebase "How is the tickets table created? What columns does it have?" • **15** results</summary>
            
| File | Lines |
|------|-------|
| `server/src/services/ticketService.ts` | L351-427 |
| `server/src/services/ticketService.ts` | L75-180 |
| `server/src/services/ticketService.ts` | L83-321 |
| `server/src/services/ticketService.ts` | L3-81 |
| `server/src/routes/tickets.ts` | L89 |
| `server/src/routes/tickets.ts` | L39-102 |
| `server/src/services/ticketService.ts` | L453-594 |
| `src/pages/TicketListDashboard.tsx` | L709 |
| `server/src/services/ticketService.ts` | L463-643 |
| `server/src/services/ticketService.ts` | L13-152 |
| `src/pages/TicketDetails.tsx` | L38 |
| `server/src/services/ticketService.ts` | L154-321 |
| `server/src/services/ticketService.ts` | L180-321 |
| `server/src/services/ticketService.ts` | L336-410 |
| `src/apiClient.ts` | L14-157 |

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: server/src/db.ts</summary>

</details>
</tool-use>

---



---


Adding deadline support for tickets. Creating the initial todo list and starting implementation:


---

<tool-use data-tool-type="task" data-tool-name="todo_write">
<details><summary>Tool use: **todo_write** • Todo List</summary>

- [-] Create database migration to add deadline column to tickets table
- [ ] Update backend ticket service to handle deadline in create/update operations
- [ ] Update API routes to accept deadline in request schemas
- [ ] Update frontend API client to support deadline field
- [ ] Add deadline input field to CreateNewTicket page
- [ ] Add deadline display and edit functionality to TicketDetails page

</details>
</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="write">

<details><summary>Tool use: **write** • Edit file: server/migrations/add_ticket_deadline.sql</summary>

**Chunk 1**
Lines added: 7, lines removed: 1

```diff
@@ -1,1 +1,7 @@
- 
+ -- Add deadline column to tickets table
+ ALTER TABLE public.tickets
+ ADD COLUMN IF NOT EXISTS deadline TIMESTAMP WITH TIME ZONE;
+ 
+ -- Add index for deadline queries (useful for filtering/sorting by deadline)
+ CREATE INDEX IF NOT EXISTS idx_tickets_deadline ON public.tickets(deadline) WHERE deadline IS NOT NULL;
+ 
```

</details>

</tool-use>

---



---


Updating the backend service and routes to handle deadline:


---

<tool-use data-tool-type="task" data-tool-name="todo_write">
<details><summary>Tool use: **todo_write** • Todo List</summary>

- [x] Create database migration to add deadline column to tickets table
- [-] Update backend ticket service to handle deadline in create/update operations
- [ ] Update API routes to accept deadline in request schemas
- [ ] Update frontend API client to support deadline field
- [ ] Add deadline input field to CreateNewTicket page
- [ ] Add deadline display and edit functionality to TicketDetails page

</details>
</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: server/src/services/ticketService.ts</summary>

**Chunk 1**
Lines added: 1, lines removed: undefined

```diff
@@ -80,4 +80,5 @@
    createdBy: string
    assignedTo?: string | null
+   deadline?: string | null
  }
  
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: server/src/services/ticketService.ts</summary>

**Chunk 1**
Lines added: 2, lines removed: 2

```diff
@@ -92,6 +92,6 @@
  
      const insertTicketSql = &#96;
-       INSERT INTO public.tickets (title, description, priority, created_by, assigned_to)
-       VALUES ($1, $2, $3, $4, $5)
+       INSERT INTO public.tickets (title, description, priority, created_by, assigned_to, deadline)
+       VALUES ($1, $2, $3, $4, $5, $6)
        RETURNING *
      &#96;
```

**Chunk 2**
Lines added: 1, lines removed: undefined

```diff
@@ -103,4 +103,5 @@
        input.createdBy,
        input.assignedTo ?? null,
+       input.deadline || null,
      ])
  
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: server/src/services/ticketService.ts</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -185,5 +185,5 @@
  export async function updateTicket(
    ticketId: string,
-   fields: { status?: string; assignedTo?: string | null; priority?: string; title?: string; description?: string },
+   fields: { status?: string; assignedTo?: string | null; priority?: string; title?: string; description?: string; deadline?: string | null },
    userId?: string
  ) {
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: server/src/services/ticketService.ts</summary>

**Chunk 1**
Lines added: 5, lines removed: undefined

```diff
@@ -230,4 +230,9 @@
        updates.push(&#96;description = $${params.length}&#96;)
      }
+ 
+     if (fields.deadline !== undefined) {
+       params.push(fields.deadline)
+       updates.push(&#96;deadline = $${params.length}&#96;)
+     }
  
      if (!updates.length) {
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: server/src/services/ticketService.ts</summary>

**Chunk 1**
Lines added: 1, lines removed: undefined

```diff
@@ -311,4 +311,5 @@
        if (fields.priority) activityDetails.priority = fields.priority
        if (fields.assignedTo !== undefined) activityDetails.assignedTo = fields.assignedTo
+       if (fields.deadline !== undefined) activityDetails.deadline = fields.deadline
        if (titleChanged) activityDetails.title = { from: current.title, to: fields.title }
        if (descChanged) activityDetails.description = { changed: true }
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: server/src/services/ticketService.ts</summary>

**Chunk 1**
Lines added: 1, lines removed: undefined

```diff
@@ -380,4 +380,5 @@
        t.status,
        t.priority,
+       t.deadline,
        t.created_at,
        t.updated_at,
```

</details>

</tool-use>

---



---


Updating API routes to accept deadline:


---

<tool-use data-tool-type="task" data-tool-name="todo_write">
<details><summary>Tool use: **todo_write** • Todo List</summary>

- [x] Create database migration to add deadline column to tickets table
- [x] Update backend ticket service to handle deadline in create/update operations
- [-] Update API routes to accept deadline in request schemas
- [ ] Update frontend API client to support deadline field
- [ ] Add deadline input field to CreateNewTicket page
- [ ] Add deadline display and edit functionality to TicketDetails page

</details>
</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: server/src/routes/tickets.ts</summary>

**Chunk 1**
Lines added: 1, lines removed: undefined

```diff
@@ -24,4 +24,5 @@
    priority: z.enum(['low', 'medium', 'high', 'critical']).optional(),
    assignedTo: z.string().uuid().nullable().optional(),
+   deadline: z.string().datetime().nullable().optional(),
  })
  
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: server/src/routes/tickets.ts</summary>

**Chunk 1**
Lines added: 1, lines removed: undefined

```diff
@@ -37,4 +37,5 @@
    title: z.string().min(3).optional(),
    description: z.string().min(10).optional(),
+   deadline: z.string().datetime().nullable().optional(),
  })
  
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: server/src/routes/tickets.ts</summary>

**Chunk 1**
Lines added: 1, lines removed: undefined

```diff
@@ -84,4 +84,5 @@
        createdBy: user.sub,
        assignedTo: body.assignedTo ?? null,
+       deadline: body.deadline ?? null,
      })
  
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: server/src/routes/tickets.ts</summary>

**Chunk 1**
Lines added: 1, lines removed: undefined

```diff
@@ -142,4 +142,5 @@
          title: body.title,
          description: body.description,
+         deadline: body.deadline,
        },
        user.sub
```

</details>

</tool-use>

---



---


Updating the frontend API client:


---

<tool-use data-tool-type="task" data-tool-name="todo_write">
<details><summary>Tool use: **todo_write** • Todo List</summary>

- [x] Create database migration to add deadline column to tickets table
- [x] Update backend ticket service to handle deadline in create/update operations
- [x] Update API routes to accept deadline in request schemas
- [-] Update frontend API client to support deadline field
- [ ] Add deadline input field to CreateNewTicket page
- [ ] Add deadline display and edit functionality to TicketDetails page

</details>
</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: src/apiClient.ts</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -60,5 +60,5 @@
    },
  
-   createTicket: (data: { title: string; description: string; priority?: string }) =&gt;
+   createTicket: (data: { title: string; description: string; priority?: string; deadline?: string | null }) =&gt;
      request('/tickets', {
        method: 'POST',
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: src/apiClient.ts</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -78,5 +78,5 @@
    updateTicket: (
      id: string,
-     data: { status?: string; priority?: string; assignedTo?: string | null; title?: string; description?: string }
+     data: { status?: string; priority?: string; assignedTo?: string | null; title?: string; description?: string; deadline?: string | null }
    ) =&gt;
      request(&#96;/tickets/${id}&#96;, {
```

</details>

</tool-use>

---



---


Adding a deadline input field to the CreateNewTicket page:


---

<tool-use data-tool-type="task" data-tool-name="todo_write">
<details><summary>Tool use: **todo_write** • Todo List</summary>

- [x] Create database migration to add deadline column to tickets table
- [x] Update backend ticket service to handle deadline in create/update operations
- [x] Update API routes to accept deadline in request schemas
- [x] Update frontend API client to support deadline field
- [-] Add deadline input field to CreateNewTicket page
- [ ] Add deadline display and edit functionality to TicketDetails page

</details>
</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: src/pages/CreateNewTicket.tsx</summary>

**Chunk 1**
Lines added: 1, lines removed: undefined

```diff
@@ -16,4 +16,5 @@
    const [priority, setPriority] = useState&lt;'low' | 'medium' | 'high'&gt;('medium')
    const [description, setDescription] = useState('')
+   const [deadline, setDeadline] = useState('')
    const [submitting, setSubmitting] = useState(false)
    const [error, setError] = useState&lt;string | null&gt;(null)
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: src/pages/CreateNewTicket.tsx</summary>

**Chunk 1**
Lines added: 6, lines removed: 1

```diff
@@ -29,5 +29,10 @@
      try {
        setSubmitting(true)
-       const result = await api.createTicket({ title, description, priority })
+       const result = await api.createTicket({ 
+         title, 
+         description, 
+         priority,
+         deadline: deadline || null
+       })
        navigate(&#96;/tickets/${result.ticket.id}&#96;)
      } catch (err: any) {
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: src/pages/CreateNewTicket.tsx</summary>

**Chunk 1**
Lines added: 14, lines removed: undefined

```diff
@@ -133,4 +133,18 @@
                &lt;/div&gt;
              &lt;/div&gt;
+ 
+             &lt;div className="space-y-2"&gt;
+               &lt;label className="text-sm font-bold text-gray-700 dark:text-gray-300 flex items-center gap-2"&gt;
+                 Deadline (Optional)
+                 &lt;span className="material-symbols-outlined text-sm text-gray-400"&gt;event&lt;/span&gt;
+               &lt;/label&gt;
+               &lt;input
+                 type="datetime-local"
+                 className="form-input w-full px-4 py-3.5 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-sm focus:outline-none transition-all"
+                 value={deadline}
+                 onChange={(e) =&gt; setDeadline(e.target.value)}
+               /&gt;
+               &lt;p className="text-xs text-gray-500 dark:text-gray-400"&gt;Set a target completion date and time for this ticket&lt;/p&gt;
+             &lt;/div&gt;
  
              &lt;div className="space-y-2"&gt;
```

</details>

</tool-use>

---



---


Updating the TicketDetails page to display and edit the deadline:


---

<tool-use data-tool-type="task" data-tool-name="todo_write">
<details><summary>Tool use: **todo_write** • Todo List</summary>

- [x] Create database migration to add deadline column to tickets table
- [x] Update backend ticket service to handle deadline in create/update operations
- [x] Update API routes to accept deadline in request schemas
- [x] Update frontend API client to support deadline field
- [x] Add deadline input field to CreateNewTicket page
- [-] Add deadline display and edit functionality to TicketDetails page

</details>
</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: src/pages/TicketDetails.tsx</summary>

**Chunk 1**
Lines added: 1, lines removed: undefined

```diff
@@ -12,4 +12,5 @@
    status: string
    priority: string
+   deadline?: string | null
    created_at: string
    created_by_name?: string
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: src/pages/TicketDetails.tsx</summary>

**Chunk 1**
Lines added: 1, lines removed: undefined

```diff
@@ -131,4 +131,5 @@
    const [titleDraft, setTitleDraft] = useState('')
    const [descriptionDraft, setDescriptionDraft] = useState('')
+   const [deadlineDraft, setDeadlineDraft] = useState&lt;string&gt;('')
  
    useEffect(() =&gt; {
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: src/pages/TicketDetails.tsx</summary>

**Chunk 1**
Lines added: 12, lines removed: undefined

```diff
@@ -152,4 +152,16 @@
            setTitleDraft(ticketRes.title || '')
            setDescriptionDraft(ticketRes.description || '')
+           // Convert deadline to datetime-local format (YYYY-MM-DDTHH:mm)
+           if (ticketRes.deadline) {
+             const deadlineDate = new Date(ticketRes.deadline)
+             const year = deadlineDate.getFullYear()
+             const month = String(deadlineDate.getMonth() + 1).padStart(2, '0')
+             const day = String(deadlineDate.getDate()).padStart(2, '0')
+             const hours = String(deadlineDate.getHours()).padStart(2, '0')
+             const minutes = String(deadlineDate.getMinutes()).padStart(2, '0')
+             setDeadlineDraft(&#96;${year}-${month}-${day}T${hours}:${minutes}&#96;)
+           } else {
+             setDeadlineDraft('')
+           }
            if (usersRes.data) {
              setUsers(usersRes.data.map((u: any) =&gt; ({ id: u.id, name: u.name || u.email })))
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: src/pages/TicketDetails.tsx</summary>

**Chunk 1**
Lines added: 9, lines removed: undefined

```diff
@@ -94,4 +94,13 @@
        }
      }
+     
+     if (details.deadline !== undefined) {
+       if (details.deadline === null) {
+         changes.push('deadline removed')
+       } else {
+         const deadlineDate = new Date(details.deadline)
+         changes.push(&#96;deadline set to ${deadlineDate.toLocaleString()}&#96;)
+       }
+     }
      
      if (changes.length === 0) {
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: src/pages/TicketDetails.tsx</summary>

**Chunk 1**
Lines added: 1, lines removed: undefined

```diff
@@ -236,4 +236,5 @@
          title: editMode ? titleDraft : undefined,
          description: editMode ? descriptionDraft : undefined,
+         deadline: editMode ? (deadlineDraft || null) : undefined,
        })
        setTicket((prev) =&gt; (prev ? { ...prev, ...updated } : updated))
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: src/pages/TicketDetails.tsx</summary>

**Chunk 1**
Lines added: 11, lines removed: undefined

```diff
@@ -254,4 +254,15 @@
      setTitleDraft(ticket?.title || '')
      setDescriptionDraft(ticket?.description || '')
+     if (ticket?.deadline) {
+       const deadlineDate = new Date(ticket.deadline)
+       const year = deadlineDate.getFullYear()
+       const month = String(deadlineDate.getMonth() + 1).padStart(2, '0')
+       const day = String(deadlineDate.getDate()).padStart(2, '0')
+       const hours = String(deadlineDate.getHours()).padStart(2, '0')
+       const minutes = String(deadlineDate.getMinutes()).padStart(2, '0')
+       setDeadlineDraft(&#96;${year}-${month}-${day}T${hours}:${minutes}&#96;)
+     } else {
+       setDeadlineDraft('')
+     }
    }
  
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: src/pages/TicketDetails.tsx</summary>

**Chunk 1**
Lines added: 19, lines removed: undefined

```diff
@@ -438,4 +438,23 @@
                  &lt;/div&gt;
                &lt;/div&gt;
+               &lt;div&gt;
+                 &lt;p className="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1"&gt;Deadline&lt;/p&gt;
+                 &lt;div className="flex items-center gap-2"&gt;
+                   &lt;span className="material-symbols-outlined text-gray-400 text-lg"&gt;event&lt;/span&gt;
+                   {loading ? &lt;Skeleton className="h-4 w-32" /&gt; : (
+                     &lt;span className={&#96;text-sm font-semibold ${
+                       ticket?.deadline 
+                         ? new Date(ticket.deadline) &lt; new Date()
+                           ? 'text-red-600 dark:text-red-400'
+                           : 'text-gray-800 dark:text-gray-200'
+                         : 'text-gray-500 dark:text-gray-400'
+                     }&#96;}&gt;
+                       {ticket?.deadline 
+                         ? new Date(ticket.deadline).toLocaleString()
+                         : 'No deadline'}
+                     &lt;/span&gt;
+                   )}
+                 &lt;/div&gt;
+               &lt;/div&gt;
                &lt;div&gt;
                  &lt;p className="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1"&gt;Source&lt;/p&gt;
```

**Chunk 2**
Lines added: undefined, lines removed: 6

```diff
@@ -445,10 +464,4 @@
                  &lt;/div&gt;
                &lt;/div&gt;
-               &lt;div&gt;
-                 &lt;p className="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1"&gt;Customer&lt;/p&gt;
-                 &lt;div className="flex items-center gap-2"&gt;
-                   &lt;span className="text-sm font-semibold text-primary underline underline-offset-4 decoration-primary/30"&gt;Acme Corp&lt;/span&gt;
-                 &lt;/div&gt;
-               &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: src/pages/TicketDetails.tsx</summary>

**Chunk 1**
Lines added: 10, lines removed: undefined

```diff
@@ -393,4 +393,14 @@
                      &lt;/div&gt;
                    )}
+ 
+                   &lt;div className="flex items-center gap-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg px-3 h-10 shadow-sm"&gt;
+                     &lt;label className="text-xs font-semibold text-gray-500"&gt;Deadline&lt;/label&gt;
+                     &lt;input
+                       type="datetime-local"
+                       value={deadlineDraft}
+                       onChange={(e) =&gt; setDeadlineDraft(e.target.value)}
+                       className="text-xs font-semibold bg-transparent outline-none"
+                     /&gt;
+                   &lt;/div&gt;
  
                    &lt;button
```

</details>

</tool-use>

---



---


Fixing the deadline update to only apply in edit mode:


---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: src/pages/TicketDetails.tsx</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -236,5 +236,5 @@
          title: editMode ? titleDraft : undefined,
          description: editMode ? descriptionDraft : undefined,
-         deadline: editMode ? (deadlineDraft || null) : undefined,
+         deadline: deadlineDraft ? deadlineDraft : null,
        })
        setTicket((prev) =&gt; (prev ? { ...prev, ...updated } : updated))
```

</details>

</tool-use>

---

<tool-use data-tool-type="task" data-tool-name="todo_write">
<details><summary>Tool use: **todo_write** • Todo List</summary>

- [x] Create database migration to add deadline column to tickets table
- [x] Update backend ticket service to handle deadline in create/update operations
- [x] Update API routes to accept deadline in request schemas
- [x] Update frontend API client to support deadline field
- [x] Add deadline input field to CreateNewTicket page
- [x] Add deadline display and edit functionality to TicketDetails page

</details>
</tool-use>

---

<tool-use data-tool-type="generic" data-tool-name="read_lints">
<details>
          <summary>Tool use: **read_lints** • Read lints for 5 files</summary>
      
Lint paths:

- `server/src/routes/tickets.ts`
- `server/src/services/ticketService.ts`
- `src/apiClient.ts`
- `src/pages/CreateNewTicket.tsx`
- `src/pages/TicketDetails.tsx`

Lint results


**No lint errors found**
</details>
</tool-use>

---



---


Ensuring the deadline field only appears in edit mode. Checking the structure:


---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: src/pages/TicketDetails.tsx</summary>

</details>
</tool-use>

---



---


Checking if the deadline field should be visible outside edit mode. Reviewing the structure:


---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: src/pages/TicketDetails.tsx</summary>

</details>
</tool-use>

---



---


Fixing deadline formatting for the API: converting the datetime-local value to ISO 8601.


---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: src/pages/TicketDetails.tsx</summary>

**Chunk 1**
Lines added: 6, lines removed: undefined

```diff
@@ -230,4 +230,10 @@
      setUpdating(true)
      try {
+       // Convert deadline to ISO 8601 format if provided
+       let deadlineISO: string | null = null
+       if (deadlineDraft) {
+         deadlineISO = new Date(deadlineDraft).toISOString()
+       }
+ 
        const updated = await api.updateTicket(id, {
          status: statusDraft,
```

**Chunk 2**
Lines added: 1, lines removed: 1

```diff
@@ -236,5 +242,5 @@
          title: editMode ? titleDraft : undefined,
          description: editMode ? descriptionDraft : undefined,
-         deadline: deadlineDraft ? deadlineDraft : null,
+         deadline: deadlineISO,
        })
        setTicket((prev) =&gt; (prev ? { ...prev, ...updated } : updated))
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: src/pages/CreateNewTicket.tsx</summary>

Status: **loading**

</details>

</tool-use>

---



---



---

<tool-use data-tool-type="unknown" data-tool-name="read_lints">
<details>
<summary>Tool use: **read_lints**</summary>

Status: **loading**


</details>
</tool-use>

---



---



---

